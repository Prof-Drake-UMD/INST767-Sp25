apiVersion: batch.googleapis.com/v1
kind: Job
metadata:
  name: python-batch-job
region: us-central1  # Adjust to your region
taskGroups:
  - taskSpec:
      runnables:
        - script:
            text: |
              #!/bin/bash
              set -e

              # Install Python dependencies
              pip install --upgrade pip
              pip install requests pandas google-cloud-storage

              # Download the main.py script from GCS
              gsutil cp gs://YOUR_BUCKET_NAME/main.py .

              # Run the script
              python main.py
      computeResource:
        cpuMilli: 1000  # 1 vCPU
        memoryMib: 2048  # 2 GB RAM
    taskCount: 1
allocationPolicy:
  instances:
    - policy:
        machineType: e2-standard-2  # Adjust if needed
